{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>{% block title %}Medessentia{% endblock %}</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Poppins:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Vendor CSS -->
  <link href="{% static 'medilab/assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'medilab/assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'medilab/assets/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'medilab/assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'medilab/assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS -->
  <link href="{% static 'medilab/assets/css/main.css' %}" rel="stylesheet">
  
  <!-- Estilos responsivos adicionales -->
  <style>
    /* Estilos base para topbar */
    .topbar {
      background-color: #0d6efd !important;
      padding: 8px 0;
    }
    
    /* Estilos para el logo y branding */
    .sitename {
      font-size: 1.8rem;
    }
    
    /* Media Queries para responsividad */
    @media (max-width: 1200px) {
      .sitename {
        font-size: 1.6rem;
      }
    }
    
    @media (max-width: 992px) {
      /* Ajustes para topbar en tablets */
      .topbar .container {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .topbar .contact-info {
        margin-bottom: 10px;
        flex-wrap: wrap;
      }
      
      .topbar .contact-info i.bi-phone {
        margin-left: 0;
      }
      
      /* Branding area */
      .branding .container {
        flex-wrap: wrap;
      }
      
      .logo {
        margin-bottom: 10px;
      }
      
      /* Navegación */
      .navmenu {
        width: 100%;
        order: 3;
        margin-top: 10px;
      }
    }
    
    @media (max-width: 768px) {
      /* Topbar ajustes para móviles */
      .topbar .contact-info {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .topbar .contact-info i {
        margin-bottom: 5px;
      }
      
      .topbar .contact-info i.bi-envelope,
      .topbar .contact-info i.bi-phone {
        margin-left: 0;
      }
      
      .topbar .d-flex.align-items-center {
        width: 100%;
        justify-content: space-between;
      }
      
      /* Botones de sesión */
      .topbar .btn-sm {
        padding: 4px 8px;
        font-size: 0.85rem;
      }
      
      /* Logo */
      .sitename {
        font-size: 1.5rem;
      }
      
      /* Botón CTA en branding */
      .cta-btn {
        padding: 8px 16px;
        font-size: 0.9rem;
      }
      
      /* Footer */
      .footer .copyright {
        font-size: 0.9rem;
        padding: 0 10px;
      }
      
      /* Botón scroll top */
      .scroll-top {
        width: 40px;
        height: 40px;
        bottom: 20px;
        right: 20px;
      }
    }
    
    @media (max-width: 576px) {
      /* Ajustes para móviles pequeños */
      .topbar {
        padding: 10px 0;
      }
      
      .topbar .container {
        padding: 0 10px;
      }
      
      .topbar .contact-info {
        font-size: 0.85rem;
      }
      
      .topbar .contact-info a {
        word-break: break-word;
      }
      
      .topbar .d-flex.align-items-center span.me-3 {
        display: none; /* Ocultar saludo en móviles muy pequeños */
      }
      
      .topbar .btn-group {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
      }
      
      /* Branding */
      .sitename {
        font-size: 1.3rem;
      }
      
      /* Botón de menú móvil */
      .mobile-nav-toggle {
        font-size: 1.5rem;
      }
      
      /* Footer */
      .footer .copyright {
        font-size: 0.8rem;
        line-height: 1.4;
      }
      
      /* Botón scroll top más pequeño */
      .scroll-top {
        width: 35px;
        height: 35px;
        font-size: 1rem;
      }
    }
    
    @media (max-width: 400px) {
      /* Ajustes para móviles muy pequeños */
      .topbar .contact-info i.bi-envelope span,
      .topbar .contact-info i.bi-phone span {
        font-size: 0.8rem;
      }
      
      .topbar .btn-sm {
        padding: 3px 6px;
        font-size: 0.8rem;
      }
      
      .sitename {
        font-size: 1.2rem;
      }
      
      .topbar .d-flex.align-items-center {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
      }
      
      .topbar .d-flex.align-items-center span.me-3 {
        display: block;
        margin-bottom: 5px;
      }
    }
    
    /* Mejoras de accesibilidad y usabilidad */
    .mobile-nav-toggle {
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    
    .mobile-nav-toggle:hover {
      transform: scale(1.1);
    }
    
    .scroll-top {
      transition: all 0.3s ease;
    }
    
    .scroll-top:hover {
      transform: translateY(-3px);
    }
    
    /* Asegurar que los enlaces sean tappable en móviles */
    .navmenu a,
    .cta-btn,
    .topbar a {
      min-height: 44px;
      min-width: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Mejorar contraste en topbar */
    .topbar,
    .topbar a,
    .topbar span,
    .topbar i,
    .topbar .contact-info,
    .topbar .contact-info a,
    .topbar .contact-info i,
    .topbar .contact-info span,
    .topbar .btn,
    .topbar .btn span,
    .topbar .btn i {
      color: #ffffff !important;
    }
    
    .topbar .contact-info a:hover {
      opacity: 0.8;
    }
    
    .topbar .btn-outline-secondary {
      border-color: #ffffff !important;
      color: #ffffff !important;
      background-color: transparent !important;
    }
    
    .topbar .btn-outline-secondary:hover {
      background-color: #ffffff !important;
      color: #0d6efd !important;
    }
    
    .topbar .btn-outline-light {
      border-color: #ffffff !important;
      color: #ffffff !important;
    }
    
    .topbar .btn-outline-light:hover {
      background-color: #ffffff !important;
      color: #0d6efd !important;
    }
    
    /* Prevenir desbordamiento de texto */
    .container {
      overflow-x: hidden;
    }
  </style>
  
  {% block extra_css %}{% endblock %}
</head>
<body class="{% block body_class %}index-page{% endblock %}">

<header id="header" class="header sticky-top">
  <!-- Topbar -->
  <div class="topbar d-flex align-items-center">
    <div class="container d-flex justify-content-between">
      <div class="contact-info d-flex align-items-center">
        <i class="bi bi-envelope d-flex align-items-center">
          <a href="mailto:medessentiaconsultoriomedico@gmail.com">medessentiaconsultoriomedico@gmail.com</a>
        </i>
        <i class="bi bi-phone d-flex align-items-center ms-4">
          <span>0991043977</span>
        </i>
      </div>

      <div class="d-flex align-items-center">
        {% if user.is_authenticated %}
          <span class="me-3 d-none d-sm-inline">Hola, {{ user.first_name|default:user.username }}</span>

          {% if es_paciente %}
            <a class="btn btn-sm btn-primary me-2" href="{% url 'panel_paciente' %}">Mi panel</a>
          {% elif es_doctor %}
            <a class="btn btn-sm btn-primary me-2" href="{% url 'panel_doctor' %}">Panel Doctor</a>
          {% elif es_admin %}
            <a class="btn btn-sm btn-primary me-2" href="{% url 'panel_admin' %}">Panel Admin</a>
          {% endif %}

          <a class="btn btn-sm btn-outline-secondary" href="{% url 'logout' %}">Cerrar sesión</a>
        {% else %}
          <a class="btn btn-sm btn-outline-light me-2" href="{% url 'login' %}">
            Iniciar sesión
          </a>
          {% if not hide_register_link %}
            <a class="btn btn-sm btn-primary" href="{% url 'registro_paciente' %}">Registrarse</a>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>
  <!-- /Topbar -->

  <!-- Branding + Nav -->
  <div class="branding d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">
      <a href="{% url 'home_publico' %}" class="logo d-flex align-items-center me-auto">
        <h1 class="sitename">Medessentia</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="{% url 'home_publico' %}#hero" class="active">Inicio</a></li>
          <li><a href="{% url 'home_publico' %}#about">Nosotros</a></li>
          <li><a href="{% url 'home_publico' %}#services">Servicios</a></li>
          <li><a href="{% url 'home_publico' %}#contact">Contacto</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      {% if user.is_authenticated %}
        {% if es_paciente %}
          <a class="cta-btn d-none d-sm-block" href="{% url 'panel_paciente' %}">Ir a mi panel</a>
        {% elif es_doctor %}
          <a class="cta-btn d-none d-sm-block" href="{% url 'panel_doctor' %}">Ir a mi panel</a>
        {% elif es_admin %}
          <a class="cta-btn d-none d-sm-block" href="{% url 'panel_admin' %}">Ir a mi panel</a>
        {% endif %}
      {% else %}
        <a class="cta-btn d-none d-sm-block btn btn-primary" href="{% url 'login' %}">Iniciar sesión</a>
      {% endif %}
    </div>
  </div>
  <!-- /Branding + Nav -->
</header>

<main class="main">
  {% block content %}{% endblock %}
</main>

<footer id="footer" class="footer light-background">
  <div class="container copyright text-center mt-4">
    <p>© <strong class="px-1 sitename">Medessentia</strong> · Todos los derechos reservados</p>
  </div>
</footer>

<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
  <i class="bi bi-arrow-up-short"></i>
</a>

<div id="preloader"></div>

<!-- Vendor JS -->
<script src="{% static 'medilab/assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'medilab/assets/vendor/aos/aos.js' %}"></script>
<script src="{% static 'medilab/assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
<script src="{% static 'medilab/assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
<script src="{% static 'medilab/assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
<!-- Main JS -->
<script src="{% static 'medilab/assets/js/main.js' %}"></script>

<!-- Script para manejar menú móvil -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const mobileNavToggle = document.querySelector('.mobile-nav-toggle');
  const navmenu = document.querySelector('#navmenu ul');
  
  if (mobileNavToggle && navmenu) {
    mobileNavToggle.addEventListener('click', function() {
      navmenu.classList.toggle('show');
      mobileNavToggle.classList.toggle('bi-list');
      mobileNavToggle.classList.toggle('bi-x');
    });
    
    // Cerrar menú al hacer clic en un enlace (para móviles)
    const navLinks = document.querySelectorAll('#navmenu a');
    navLinks.forEach(link => {
      link.addEventListener('click', function() {
        if (window.innerWidth <= 1200) {
          navmenu.classList.remove('show');
          mobileNavToggle.classList.add('bi-list');
          mobileNavToggle.classList.remove('bi-x');
        }
      });
    });
  }
  
  // Manejar el botón de scroll top
  const scrollTopButton = document.getElementById('scroll-top');
  if (scrollTopButton) {
    window.addEventListener('scroll', function() {
      if (window.pageYOffset > 300) {
        scrollTopButton.style.opacity = '1';
        scrollTopButton.style.visibility = 'visible';
      } else {
        scrollTopButton.style.opacity = '0';
        scrollTopButton.style.visibility = 'hidden';
      }
    });
    
    scrollTopButton.addEventListener('click', function(e) {
      e.preventDefault();
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  }
});
</script>

{% block extra_js %}{% endblock %}
</body>
</html>