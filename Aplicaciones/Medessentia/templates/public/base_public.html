{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>{% block title %}Medessentia{% endblock %}</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Poppins:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <!-- Después de main.css -->
  <link href="{% static 'medilab/assets/css/override.css' %}" rel="stylesheet">

  <!-- Vendor CSS -->
  <link href="{% static 'medilab/assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'medilab/assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'medilab/assets/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'medilab/assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'medilab/assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS -->
  <link href="{% static 'medilab/assets/css/main.css' %}" rel="stylesheet">
  
  <!-- Estilos responsivos adicionales -->
  <!-- SOLO este CSS, elimina todo lo anterior -->
<style>
  /* Override específico para topbar - alta especificidad */
  body .topbar {
    background-color: #0d6efd !important;
    padding: 0 !important;
    height: 40px !important;
    display: flex !important;
    align-items: center !important;
  }

  body .topbar .container {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    height: 100% !important;
    padding: 0 15px !important;
  }

  body .topbar .contact-info {
    display: flex !important;
    align-items: center !important;
    gap: 20px !important;
    margin: 0 !important;
  }

  body .topbar .contact-info i {
    display: flex !important;
    align-items: center !important;
    gap: 5px !important;
    color: white !important;
    margin: 0 !important;
  }

  body .topbar .contact-info a,
  body .topbar .contact-info span {
    color: white !important;
    text-decoration: none !important;
  }

  body .topbar .d-none.d-md-flex.align-items-center {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
  }

  /* Asegurar que el header sea fijo y no se solape */
  #header.header {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1030 !important;
    width: 100% !important;
  }

  /* Compensar el contenido para que no quede debajo del header fijo */
  .main {
    padding-top: 140px !important;
  }

  /* Responsive */
  @media (max-width: 768px) {
    body .topbar .contact-info .bi-envelope {
      display: none !important;
    }
    
    body .topbar .d-none.d-md-flex.align-items-center {
      display: none !important;
    }
    
    .main {
      padding-top: 100px !important;
    }
  }
</style>
  
  {% block extra_css %}{% endblock %}
</head>
<body class="{% block body_class %}index-page{% endblock %}">

<header id="header" class="header sticky-top">
  <!-- Topbar -->
  <div class="topbar d-flex align-items-center">
    <div class="container d-flex justify-content-between">
      <div class="contact-info d-flex align-items-center">
        <i class="bi bi-envelope d-flex align-items-center">
          <a href="mailto:medessentiaconsultoriomedico@gmail.com">medessentiaconsultoriomedico@gmail.com</a>
        </i>
        <i class="bi bi-phone d-flex align-items-center ms-4">
          <span>0991043977</span>
        </i>
      </div>

      <div class="d-flex align-items-center">
        {% if user.is_authenticated %}
          <span class="me-3 d-none d-sm-inline">Hola, {{ user.first_name|default:user.username }}</span>

          {% if es_paciente %}
            <a class="btn btn-sm btn-primary me-2" href="{% url 'panel_paciente' %}">Mi panel</a>
          {% elif es_doctor %}
            <a class="btn btn-sm btn-primary me-2" href="{% url 'panel_doctor' %}">Panel Doctor</a>
          {% elif es_admin %}
            <a class="btn btn-sm btn-primary me-2" href="{% url 'panel_admin' %}">Panel Admin</a>
          {% endif %}

          <a class="btn btn-sm btn-outline-secondary" href="{% url 'logout' %}">Cerrar sesión</a>
        {% else %}
          <a class="btn btn-sm btn-outline-light me-2" href="{% url 'login' %}">
            Iniciar sesión
          </a>
          {% if not hide_register_link %}
            <a class="btn btn-sm btn-outline-light me-2 " href="{% url 'registro_paciente' %}">Registrarse</a>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>
  <!-- /Topbar -->

  <!-- Branding + Nav -->
  <div class="branding d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">
      <a href="{% url 'home_publico' %}" class="logo d-flex align-items-center me-auto">
        <h1 class="sitename">Medessentia</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="{% url 'home_publico' %}#hero" class="active">Inicio</a></li>
          <li><a href="{% url 'home_publico' %}#about">Nosotros</a></li>
          <li><a href="{% url 'home_publico' %}#services">Servicios</a></li>
          <li><a href="{% url 'home_publico' %}#contact">Contacto</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      {% if user.is_authenticated %}
        {% if es_paciente %}
          <a class="cta-btn d-none d-sm-block" href="{% url 'panel_paciente' %}">Ir a mi panel</a>
        {% elif es_doctor %}
          <a class="cta-btn d-none d-sm-block" href="{% url 'panel_doctor' %}">Ir a mi panel</a>
        {% elif es_admin %}
          <a class="cta-btn d-none d-sm-block" href="{% url 'panel_admin' %}">Ir a mi panel</a>
        {% endif %}
      {% else %}
        <a class="cta-btn d-none d-sm-block btn btn-primary" href="{% url 'login' %}">Iniciar sesión</a>
      {% endif %}
    </div>
  </div>
  <!-- /Branding + Nav -->
</header>

<main class="main">
  {% block content %}{% endblock %}
</main>

<footer id="footer" class="footer light-background">
  <div class="container copyright text-center mt-4">
    <p>© <strong class="px-1 sitename">Medessentia</strong> · Todos los derechos reservados</p>
  </div>
</footer>

<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
  <i class="bi bi-arrow-up-short"></i>
</a>

<div id="preloader"></div>

<!-- Vendor JS -->
<script src="{% static 'medilab/assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'medilab/assets/vendor/aos/aos.js' %}"></script>
<script src="{% static 'medilab/assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
<script src="{% static 'medilab/assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
<script src="{% static 'medilab/assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
<!-- Main JS -->
<script src="{% static 'medilab/assets/js/main.js' %}"></script>

<!-- Script para manejar menú móvil -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const mobileNavToggle = document.querySelector('.mobile-nav-toggle');
  const navmenu = document.querySelector('#navmenu ul');
  
  if (mobileNavToggle && navmenu) {
    mobileNavToggle.addEventListener('click', function() {
      navmenu.classList.toggle('show');
      mobileNavToggle.classList.toggle('bi-list');
      mobileNavToggle.classList.toggle('bi-x');
    });
    
    // Cerrar menú al hacer clic en un enlace (para móviles)
    const navLinks = document.querySelectorAll('#navmenu a');
    navLinks.forEach(link => {
      link.addEventListener('click', function() {
        if (window.innerWidth <= 1200) {
          navmenu.classList.remove('show');
          mobileNavToggle.classList.add('bi-list');
          mobileNavToggle.classList.remove('bi-x');
        }
      });
    });
  }
  
  // Manejar el botón de scroll top
  const scrollTopButton = document.getElementById('scroll-top');
  if (scrollTopButton) {
    window.addEventListener('scroll', function() {
      if (window.pageYOffset > 300) {
        scrollTopButton.style.opacity = '1';
        scrollTopButton.style.visibility = 'visible';
      } else {
        scrollTopButton.style.opacity = '0';
        scrollTopButton.style.visibility = 'hidden';
      }
    });
    
    scrollTopButton.addEventListener('click', function(e) {
      e.preventDefault();
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  }
});
</script>

{% block extra_js %}{% endblock %}
</body>
</html>