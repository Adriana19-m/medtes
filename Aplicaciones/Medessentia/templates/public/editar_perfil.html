{% extends "public/base_paciente.html" %}
{% block title %}Editar perfil{% endblock %}
{% block body_class %}inner-page{% endblock %}

{% block paciente_content %}
<section class="section py-5">
  <div class="container" style="max-width: 900px;">
    
    <div class="d-flex align-items-center mb-4">
      <i class="fas fa-user-edit fa-2x text-primary me-3"></i>
      <div>
        <h2 class="mb-0">Editar perfil</h2>
        <small class="text-muted">Actualiza tu información personal</small>
      </div>
    </div>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags|default:'info' }} alert-dismissible fade show">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    {% endif %}

    <div class="row">
      <div class="col-lg-8">
        <form method="post" class="card shadow-sm p-4">
          {% csrf_token %}

          <!-- Género -->
          <div class="mb-3">
            <label class="form-label" for="genero_usuario">Género</label>
            <select name="genero_usuario" id="genero_usuario" class="form-select">
              <option value="">Selecciona género</option>
              <option value="Masculino" {% if perfil.genero_usuario == "Masculino" %}selected{% endif %}>Masculino</option>
              <option value="Femenino" {% if perfil.genero_usuario == "Femenino" %}selected{% endif %}>Femenino</option>
              <option value="Otro" {% if perfil.genero_usuario == "Otro" %}selected{% endif %}>Otro</option>
            </select>
          </div>

          <!-- Cédula -->
          <div class="mb-3">
            <label class="form-label" for="cedula_usuario">
              Cédula <span class="text-danger">*</span>
            </label>
            <input
              type="text"
              name="cedula_usuario"
              id="cedula_usuario"
              class="form-control"
              value="{{ perfil.cedula_usuario }}"
              required
              maxlength="10"
              pattern="\d{10}"
              inputmode="numeric"
              autocomplete="off"
              placeholder="Ej. 0501234567"
            >
            <div class="form-text">Debe contener exactamente 10 dígitos numéricos.</div>
          </div>

          <!-- Teléfono -->
          <div class="mb-3">
            <label class="form-label" for="telefono_usuario">Teléfono</label>
            <input
              type="text"
              name="telefono_usuario"
              id="telefono_usuario"
              class="form-control"
              value="{{ perfil.telefono_usuario }}"
              maxlength="10"
              pattern="\d{10}"
              inputmode="tel"
              autocomplete="tel"
              placeholder="Ej. 0991234567"
            >
            <div class="form-text">Opcional. 10 dígitos sin espacios.</div>
          </div>

          <!-- Dirección -->
          <div class="mb-4">
            <label class="form-label" for="direccion_usuario">Dirección</label>
            <input
              type="text"
              name="direccion_usuario"
              id="direccion_usuario"
              class="form-control"
              value="{{ perfil.direccion_usuario }}"
              placeholder="Barrio, calle principal, referencia"
              autocomplete="street-address"
            >
          </div>

          <button type="submit" class="btn btn-primary w-100">
            <i class="fas fa-save me-1"></i> Guardar cambios
          </button>
        </form>

        <div class="d-flex flex-wrap gap-2 mt-3">
          <a class="btn btn-outline-secondary" href="{% url 'mi_perfil' %}">
            <i class="fas fa-arrow-left me-1"></i> Volver a mi perfil
          </a>
          <a class="btn btn-outline-primary" href="{% url 'editar_cuenta' %}">
            <i class="fas fa-user-cog me-1"></i> Editar datos de cuenta
          </a>
        </div>
      </div>
    </div>

  </div>
</section>
{% endblock %}
