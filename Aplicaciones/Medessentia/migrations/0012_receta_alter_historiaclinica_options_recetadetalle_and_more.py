# Generated by Django 4.2.24 on 2025-12-15 22:48

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('Medessentia', '0011_alter_cie10_options'),
    ]

    operations = [
        migrations.CreateModel(
            name='Receta',
            fields=[
                ('id_receta', models.AutoField(primary_key=True, serialize=False)),
                ('id_atencion', models.IntegerField()),
                ('id_paciente', models.IntegerField()),
                ('id_doctor', models.IntegerField()),
                ('fecha_emision', models.DateTimeField(auto_now_add=True)),
                ('motivo', models.CharField(blank=True, max_length=200, null=True)),
                ('indicaciones_generales', models.TextField(blank=True, null=True)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('estado', models.CharField(choices=[('ACTIVA', 'Activa'), ('ANULADA', 'Anulada'), ('SURTIDA', 'Surtida')], default='ACTIVA', max_length=10)),
                ('creado_por', models.IntegerField()),
                ('actualizado_por', models.IntegerField()),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Receta',
                'verbose_name_plural': 'Recetas',
                'db_table': 'receta',
            },
        ),
        migrations.AlterModelOptions(
            name='historiaclinica',
            options={'ordering': ['-fecha_creacion'], 'verbose_name': 'Historia Clínica', 'verbose_name_plural': 'Historias Clínicas'},
        ),
        migrations.CreateModel(
            name='RecetaDetalle',
            fields=[
                ('id_detalle', models.AutoField(primary_key=True, serialize=False)),
                ('medicamento', models.CharField(max_length=150)),
                ('concentracion', models.CharField(blank=True, max_length=50, null=True)),
                ('presentacion', models.CharField(blank=True, max_length=50, null=True)),
                ('dosis', models.CharField(max_length=50)),
                ('frecuencia', models.CharField(max_length=100)),
                ('duracion_dias', models.IntegerField()),
                ('cantidad_total', models.IntegerField()),
                ('via_administracion', models.CharField(max_length=50)),
                ('indicaciones', models.TextField(blank=True, null=True)),
                ('advertencias', models.TextField(blank=True, null=True)),
                ('orden', models.IntegerField(default=0)),
                ('id_receta', models.ForeignKey(db_column='id_receta', on_delete=django.db.models.deletion.CASCADE, related_name='detalles', to='Medessentia.receta')),
            ],
            options={
                'verbose_name': 'Detalle de Receta',
                'verbose_name_plural': 'Detalles de Recetas',
                'db_table': 'receta_detalle',
                'ordering': ['orden'],
            },
        ),
        migrations.CreateModel(
            name='AtencionMedica',
            fields=[
                ('id_atencion', models.AutoField(primary_key=True, serialize=False)),
                ('id_cita', models.IntegerField(blank=True, null=True, verbose_name='ID de Cita')),
                ('fecha_atencion', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Fecha y Hora de Atención')),
                ('tipo_atencion', models.CharField(choices=[('PRIMERA_VEZ', 'Primera Vez'), ('CONTROL', 'Control'), ('EMERGENCIA', 'Emergencia'), ('TELECONSULTA', 'Teleconsulta')], default='PRIMERA_VEZ', max_length=20, verbose_name='Tipo de Atención')),
                ('motivo_consulta', models.TextField(verbose_name='Motivo de Consulta')),
                ('enfermedad_actual', models.TextField(blank=True, null=True, verbose_name='Enfermedad Actual')),
                ('presion_sistolica', models.CharField(blank=True, max_length=10, null=True, verbose_name='Presión Sistólica')),
                ('presion_diastolica', models.CharField(blank=True, max_length=10, null=True, verbose_name='Presión Diastólica')),
                ('presion_media', models.CharField(blank=True, max_length=10, null=True, verbose_name='Presión Media')),
                ('temperatura', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True, verbose_name='Temperatura (°C)')),
                ('frecuencia_respiratoria', models.IntegerField(blank=True, null=True, verbose_name='Frecuencia Respiratoria (rpm)')),
                ('frecuencia_cardiaca', models.IntegerField(blank=True, null=True, verbose_name='Frecuencia Cardíaca (lpm)')),
                ('saturacion_oxigeno', models.IntegerField(blank=True, null=True, verbose_name='Saturación de Oxígeno (%)')),
                ('peso', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Peso (kg)')),
                ('talla', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Talla (cm)')),
                ('imc', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Índice de Masa Corporal')),
                ('glucosa_capilar', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Glucosa Capilar (mg/dL)')),
                ('hemoglobina', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Hemoglobina (g/dL)')),
                ('organos_sentidos', models.TextField(blank=True, null=True, verbose_name='Órganos de los Sentidos')),
                ('respiratorio', models.TextField(blank=True, null=True, verbose_name='Sistema Respiratorio')),
                ('cardiovascular', models.TextField(blank=True, null=True, verbose_name='Sistema Cardiovascular')),
                ('digestivo', models.TextField(blank=True, null=True, verbose_name='Sistema Digestivo')),
                ('genital', models.TextField(blank=True, null=True, verbose_name='Sistema Genital')),
                ('urinario', models.TextField(blank=True, null=True, verbose_name='Sistema Urinario')),
                ('esqueletico', models.TextField(blank=True, null=True, verbose_name='Sistema Esquelético')),
                ('muscular', models.TextField(blank=True, null=True, verbose_name='Sistema Muscular')),
                ('nervioso', models.TextField(blank=True, null=True, verbose_name='Sistema Nervioso')),
                ('endocrino', models.TextField(blank=True, null=True, verbose_name='Sistema Endocrino')),
                ('hemo_linfatico', models.TextField(blank=True, null=True, verbose_name='Sistema Hemolinfático')),
                ('tegumentario', models.TextField(blank=True, null=True, verbose_name='Sistema Tegumentario')),
                ('examen_frontal', models.TextField(blank=True, null=True, verbose_name='Examen Frontal')),
                ('examen_posterior', models.TextField(blank=True, null=True, verbose_name='Examen Posterior')),
                ('examen_general', models.TextField(blank=True, null=True, verbose_name='Examen General')),
                ('examen_neurologico', models.TextField(blank=True, null=True, verbose_name='Examen Neurológico')),
                ('resultado_laboratorio', models.TextField(blank=True, null=True, verbose_name='Resultados de Laboratorio')),
                ('resultado_imagenologia', models.TextField(blank=True, null=True, verbose_name='Resultados de Imagenología')),
                ('resultado_histopatologia', models.TextField(blank=True, null=True, verbose_name='Resultados de Histopatología')),
                ('cie10_codigo', models.CharField(blank=True, max_length=10, null=True, verbose_name='Código CIE-10')),
                ('cie10_descripcion', models.CharField(blank=True, max_length=255, null=True, verbose_name='Descripción CIE-10')),
                ('diagnostico_observaciones', models.TextField(blank=True, null=True, verbose_name='Observaciones del Diagnóstico')),
                ('diagnostico_condicion', models.CharField(blank=True, choices=[('PRESUNTIVO', 'Presuntivo'), ('DEFINITIVO_INICIAL', 'Definitivo Inicial'), ('DEFINITIVO_CONFIRMADO_LAB', 'Definitivo Confirmado por Laboratorio'), ('DEFINITIVO_CONTROL', 'Definitivo de Control')], max_length=30, null=True, verbose_name='Condición del Diagnóstico')),
                ('diagnostico_cronologia', models.CharField(blank=True, choices=[('PRIMERA', 'Primera'), ('SUBSECUENTE', 'Subsiguiente')], max_length=20, null=True, verbose_name='Cronología del Diagnóstico')),
                ('plan_tratamiento', models.TextField(blank=True, null=True, verbose_name='Plan de Tratamiento')),
                ('tratamiento_no_farmacologico', models.TextField(blank=True, null=True, verbose_name='Tratamiento No Farmacológico')),
                ('evolucion', models.TextField(blank=True, null=True, verbose_name='Evolución')),
                ('pronostico', models.TextField(blank=True, null=True, verbose_name='Pronóstico')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('actualizado_por', models.ForeignKey(blank=True, db_column='actualizado_por', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='atenciones_actualizadas', to=settings.AUTH_USER_MODEL)),
                ('creado_por', models.ForeignKey(db_column='creado_por', on_delete=django.db.models.deletion.PROTECT, related_name='atenciones_creadas', to=settings.AUTH_USER_MODEL)),
                ('id_doctor', models.ForeignKey(db_column='id_doctor', on_delete=django.db.models.deletion.PROTECT, related_name='atenciones_doctor', to=settings.AUTH_USER_MODEL, verbose_name='Doctor que atendió')),
                ('id_historia', models.ForeignKey(db_column='id_historia', on_delete=django.db.models.deletion.CASCADE, related_name='atenciones', to='Medessentia.historiaclinica')),
                ('id_paciente', models.ForeignKey(db_column='id_paciente', on_delete=django.db.models.deletion.CASCADE, related_name='atenciones_paciente', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Atención Médica',
                'verbose_name_plural': 'Atenciones Médicas',
                'db_table': 'atencion',
                'ordering': ['-fecha_atencion'],
            },
        ),
        migrations.CreateModel(
            name='CertificadoMedico',
            fields=[
                ('id_certificado', models.AutoField(primary_key=True, serialize=False)),
                ('fecha_emision', models.DateField(default=django.utils.timezone.now, verbose_name='Fecha de Emisión')),
                ('hora_emision', models.TimeField(default=django.utils.timezone.now, verbose_name='Hora de Emisión')),
                ('tipo_certificado', models.CharField(choices=[('REPOSO', 'Certificado de Reposo'), ('APTITUD', 'Certificado de Aptitud'), ('ENFERMEDAD', 'Certificado de Enfermedad'), ('DISCAPACIDAD', 'Certificado de Discapacidad'), ('OTRO', 'Otro Tipo de Certificado')], default='REPOSO', max_length=20, verbose_name='Tipo de Certificado')),
                ('motivo', models.TextField(verbose_name='Motivo del Certificado')),
                ('diagnostico', models.TextField(blank=True, null=True, verbose_name='Diagnóstico')),
                ('dias_reposo', models.IntegerField(blank=True, null=True, verbose_name='Días de Reposo')),
                ('fecha_inicio_reposo', models.DateField(blank=True, null=True, verbose_name='Fecha Inicio Reposo')),
                ('fecha_fin_reposo', models.DateField(blank=True, null=True, verbose_name='Fecha Fin Reposo')),
                ('indicaciones', models.TextField(blank=True, null=True, verbose_name='Indicaciones')),
                ('observaciones', models.TextField(blank=True, null=True, verbose_name='Observaciones')),
                ('estado', models.CharField(choices=[('ACTIVO', 'Activo'), ('ANULADO', 'Anulado')], default='ACTIVO', max_length=10, verbose_name='Estado del Certificado')),
                ('firma_digital', models.TextField(blank=True, null=True, verbose_name='Firma Digital')),
                ('fecha_firma', models.DateTimeField(blank=True, null=True, verbose_name='Fecha de Firma')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('actualizado_por', models.ForeignKey(blank=True, db_column='actualizado_por', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='certificados_actualizados', to=settings.AUTH_USER_MODEL)),
                ('creado_por', models.ForeignKey(db_column='creado_por', on_delete=django.db.models.deletion.PROTECT, related_name='certificados_creados', to=settings.AUTH_USER_MODEL)),
                ('id_atencion', models.ForeignKey(db_column='id_atencion', on_delete=django.db.models.deletion.CASCADE, related_name='certificados', to='Medessentia.atencionmedica', verbose_name='Atención Médica')),
                ('id_doctor', models.ForeignKey(db_column='id_doctor', on_delete=django.db.models.deletion.PROTECT, related_name='certificados_doctor', to=settings.AUTH_USER_MODEL, verbose_name='Doctor')),
                ('id_paciente', models.ForeignKey(db_column='id_paciente', on_delete=django.db.models.deletion.CASCADE, related_name='certificados_paciente', to=settings.AUTH_USER_MODEL, verbose_name='Paciente')),
            ],
            options={
                'verbose_name': 'Certificado Médico',
                'verbose_name_plural': 'Certificados Médicos',
                'db_table': 'certificado_medico',
                'ordering': ['-fecha_emision', '-hora_emision'],
                'indexes': [models.Index(fields=['id_atencion'], name='certificado_id_aten_42fb17_idx'), models.Index(fields=['id_paciente'], name='certificado_id_paci_7ed1aa_idx'), models.Index(fields=['fecha_emision'], name='certificado_fecha_e_6a8234_idx'), models.Index(fields=['tipo_certificado'], name='certificado_tipo_ce_5bea92_idx'), models.Index(fields=['estado'], name='certificado_estado_859cb5_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='atencionmedica',
            index=models.Index(fields=['id_historia'], name='atencion_id_hist_8a235b_idx'),
        ),
        migrations.AddIndex(
            model_name='atencionmedica',
            index=models.Index(fields=['id_paciente'], name='atencion_id_paci_77006b_idx'),
        ),
        migrations.AddIndex(
            model_name='atencionmedica',
            index=models.Index(fields=['fecha_atencion'], name='atencion_fecha_a_fc86d1_idx'),
        ),
        migrations.AddIndex(
            model_name='atencionmedica',
            index=models.Index(fields=['tipo_atencion'], name='atencion_tipo_at_8aee8d_idx'),
        ),
    ]
